<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>商品列表 - 按鈕事件</title>
<link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-6 bg-gray-100">

<h1 class="text-2xl font-bold mb-4">按下按鈕顯示商品名稱</h1>
<div id="productList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>

<script>
// 商品資料
const products = [
  { name: "商品 A", desc: "好吃又便宜", img: "https://picsum.photos/300/200?9" },
  { name: "商品 B", desc: "人氣熱銷中", img: "https://picsum.photos/300/200?10" },
  { name: "商品 C", desc: "限量特價",   img: "https://picsum.photos/300/200?11" }
];

// 找到容器
const container = document.getElementById("productList");

// 用傳統 for 迴圈
for (let i = 0; i < products.length; i++) {
  const p = products[i];

  // 建立卡片元素：這邊等同於版本3的card.innerHTML第一行
  const card = document.createElement("div");       // 在JavaScript中建立一個新的<div>元素，並把它存進名為card的變數裡。<div>也可變為其他元素種類<p>、<img>...
  card.className = "card bg-base-100 shadow-xl";    // <div class="card bg-base-100 shadow-xl"> 等同於設定變數card裡的<div>元素的class屬性
  // 另一種寫法：card.classList.add("card", "bg-base-100", "shadow-xl");  分別新增class

  // 用傳統字串串接方式（避免初學者混淆模板字串與 jQuery）
  card.innerHTML =
    '<figure><img src="' + p.img + '" alt="' + p.name + '"></figure>' +
    '<div class="card-body">' +
      '<h2 class="card-title">' + p.name + '</h2>' +
      '<p>' + p.desc + '</p>' +
      '<div class="card-actions justify-end">' +
        '<button class="btn btn-primary">加入購物車</button>' +        // 寫在迴圈內，每次新增一張卡片時同時生成button按鈕
      '</div>' +
    '</div>';

  // 綁定事件：點擊按鈕會 alert 出商品名稱
  const btn = card.querySelector("button");            // 在card裡面找出第一個<button>元素，並把它存進變數btn裡。
  btn.addEventListener("click", function() {
    alert("已選擇：" + p.name);                        // 變數不同(p.name)，出現結果不同(商品A、商品B、商品C)
  });
  // querySelector()只會回傳第一個符合條件的元素。如果有很多要找的，則用querySelectorAll()。

  // 加入畫面到div id="productList"
  container.appendChild(card);   // appendChild增加子層到div id="productList"
  // 有變數card就使用card。若是使用+=(innerHTML)，btn綁定事件就不包含在裡面 >> 版本4邏輯：先綁定事件後塞入，只須執行一次迴圈
  // 全數執行完畢後，原本空空的div grid，因為跑了三次迴圈，所以會有三張卡片的內容
}
</script>

</body>

//-----------------------------------篩選小於25元的版本------------------------------------------

<body class="p-6 bg-gray-100">

<h1 class="text-2xl font-bold mb-4">篩選商品（價格小於 25 元）</h1>
<button id="filterBtn" class="btn btn-secondary mb-4">顯示價格 < 25 元商品</button>

<div id="productList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>

<script>
// === 商品資料 ===
const products = [
  { name: "商品 A", price: 20, desc: "平價好物", img: "https://picsum.photos/300/200?21" },
  { name: "商品 B", price: 30, desc: "人氣熱銷", img: "https://picsum.photos/300/200?22" },
  { name: "商品 C", price: 15, desc: "超值特惠", img: "https://picsum.photos/300/200?23" }
];

// === 找到畫面上的容器 ===
const container = document.getElementById("productList");
const filterBtn = document.getElementById("filterBtn");

// === 顯示商品清單的函式 ===
function render(list) {                           // 定義render為函數，參數為list
  container.innerHTML = "";                       // 每次先清空原有內容(清空container的內容，也就是id=productList的內容)

  // 用 for 迴圈逐一加入
  for (let i = 0; i < list.length; i++) {
    const p = list[i];                            // 取出當前第i個商品，暫存在變數p裡。保持流暢性，函數的參數改變時也會跟著改變。呼叫products這裡就會變products

    // 建立每張卡片的格式模板
    const card =
      '<div class="card bg-base-100 shadow-xl">' +
        '<figure><img src="' + p.img + '" alt="' + p.name + '"></figure>' +
        '<div class="card-body">' +
          '<h2 class="card-title">' + p.name + '</h2>' +
          '<p>' + p.desc + '</p>' +
          '<p class="text-red-500 font-bold">價格：' + p.price + ' 元</p>' +
          '<div class="card-actions justify-end">' +
            '<button class="btn btn-primary">加入購物車</button>' +
          '</div>' +
        '</div>' +
      '</div>';

    // 加入到畫面中，因為無綁定事件所以使用+=
    container.innerHTML += card;
  }
}

// === 初始顯示所有商品 ===
render(products);                                      // render呼叫第一次，參數為products陣列                 

// === 綁定篩選事件 ===
filterBtn.addEventListener("click", function() {
  const filtered = [];                                 // 宣告變數filtered為陣列

  // 用for迴圈挑出價格<25的商品，塞到陣列中(.push ~ 前序/中序/後序表示式)
  for (let i = 0; i < products.length; i++) {
    if (products[i].price < 25) {
      filtered.push(products[i]);
    }
  }  // 邏輯是新增一個for及條件篩選出需要的商品，而非刪除不在條件內的商品

  // 顯示篩選後的結果
  render(filtered);                                    // render呼叫第二次，參數為filtered陣列
});
</script>
// sort排序、search搜尋，找尋方式idea:排序後取中間切著找
</body>
  
</html>
