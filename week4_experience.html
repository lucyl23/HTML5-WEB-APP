<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>第四堂課20251002</title>
</head>
<body>
  //說明變數宣告位置(超連結在setInterval()後面)。版本6：文字快速閃爍
  <h2>今天中午吃什麼？</h2>
  <div id="result">？？？</div>
  <button onclick="draw()">開始抽籤</button>

  <script>
  const foods = ["壽司","牛排","滷肉飯","火鍋","拉麵"];

  //整體性變數：宣告於所有function外 <----> 區域性變數
  let counter = 0;       // 記錄次數
  let intervalId = null; // 存放 setInterval 的 ID

  function changeFood() {
    const pick = foods[Math.floor(Math.random() * foods.length)];
    document.getElementById("result").innerText = pick;
    counter++;
    if (counter > 10) {
      clearInterval(intervalId); // 呼叫intervalID，停止setInterval
    }
  }

  function draw() {
    counter = 0;  // 設定每次執行function時counter=0，重新開始
    intervalId = setInterval(changeFood, 100); // 每0.1秒呼叫 changeFood
  }
  </script>

  <!--
  【整體性變數 vs. 區域性變數】
  整體性變數/全域變數：宣告在所有函數最外面，像是放在客廳的箱子，從任何房間(function)都可以看得到、都可以使用該箱子
  區域性變數/局部變數：宣告於某個函數中，不能與其他function共用該變數，即使名稱相同，還是算兩個不同變數(不能共用)。function執行完該變數也會跟著消失。
  依需求根據不同功能位置宣告變數。若有兩個以上的function需要同一個變數時，就在function外宣告整體性變數。
  -->

  
//------------相片瀏覽功能：版本2 多張圖片，各自函數 - innerHTML + 陣列-----------------------
  <div id="photoContainer"></div>
  <br><br>
  <button onclick="showPrev()">上一張</button>
  <button onclick="showNext()">下一張</button>

  <script>
    //宣告變數photos為陣列，陣列[0]為第一張圖片(從0開始以此類推)
    const photos = ["http://1.bp.blogspot.com/-xdHGOG59LCI/UjawN7V-deI/AAAAAAAABb8/v3dHRriJkjo/s1600/EUCL%E4%B8%8A%E5%8F%B0%E9%A0%98%E7%8D%8E01.jpg", 
                    "http://4.bp.blogspot.com/-UKB9Pburh8I/Ujawb7t3wGI/AAAAAAAABcE/2h3OMM1sb-0/s1600/Frocius+Android%E4%B8%8A%E5%8F%B0%E9%A0%98%E7%8D%8E01.jpg", 
                    "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjUJYAY6cEyvTthq9s3Pz3RCayzcOM7UVffF8cmCk0XZBaAz7O6tLktSa7e1_f7Ni_ZxZaD8p4tLzqzhqnHo8rnsKuYvhPflJr2mAZeOSayg3sHjXCrrOtJ7cqPP6OdZAEJsHYJ5QWPTXw/s640/R0010396.JPG"];
    let index = 0;                                                            //宣告變數index(整體性變數)，作為陣列中數值來換照片
    const container = document.getElementById("photoContainer");              //assign變數container為document.getElementById("photoContainer")在這個網頁中找到Id為photoContainer的值

    function updateView() {
      container.innerHTML = '<img src="' + photos[index] + '" width="300">';  //令函數updateView：使用變數container，.innerHTML更換Id內HTML為：'A'+B+'C'，也就是設定該函數的動作換照片
    }

    function showPrev() {                      //令函數showPrev：若index>0，index減1，執行函數updateView
      if (index > 0) {                         //if條件中設定index邊界，(上下兩段)讓index停在0~2之間，也就是陣列中有值的區間
        index = index - 1;
        updateView();
      }
    }

    function showNext() {                      //令函數showNext：若index小於陣列photos的長度減1，index+1，執行函數updateView
      if (index < photos.length - 1) {        
        index = index + 1;
        updateView();
      }
    }

    updateView(); // 初始顯示
  </script>

//----------------相片瀏覽功能：版本3 陣列 + 單一函式 + 傳參數------------------------------------------------
  
  <div id="photoContainer"></div>
  <br><br>
  <button onclick="changePhoto(-1)">上一張</button>  //直接將+1、-1變成函數changePhoto的參數
  <button onclick="changePhoto(1)">下一張</button>

  <script>
    const photos = ["http://1.bp.blogspot.com/-xdHGOG59LCI/UjawN7V-deI/AAAAAAAABb8/v3dHRriJkjo/s1600/EUCL%E4%B8%8A%E5%8F%B0%E9%A0%98%E7%8D%8E01.jpg", 
                    "http://4.bp.blogspot.com/-UKB9Pburh8I/Ujawb7t3wGI/AAAAAAAABcE/2h3OMM1sb-0/s1600/Frocius+Android%E4%B8%8A%E5%8F%B0%E9%A0%98%E7%8D%8E01.jpg", 
                    "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjUJYAY6cEyvTthq9s3Pz3RCayzcOM7UVffF8cmCk0XZBaAz7O6tLktSa7e1_f7Ni_ZxZaD8p4tLzqzhqnHo8rnsKuYvhPflJr2mAZeOSayg3sHjXCrrOtJ7cqPP6OdZAEJsHYJ5QWPTXw/s640/R0010396.JPG"];
    let index = 0;
    const container = document.getElementById("photoContainer");

    function updateView() {
      container.innerHTML = '<img src="' + photos[index] + '" width="300">';
    }

    function changePhoto(step) {
      const newIndex = index + step;
      if (newIndex >= 0 && newIndex < photos.length) {
        index = newIndex;
        updateView();
      }
    }

    updateView();
  </script>

//--------------相片瀏覽功能：版本4 首尾循環---------
  <div id="photoContainer"></div>
  <p id="status"></p>
  <button onclick="changePhoto(-1)">上一張</button>
  <button onclick="changePhoto(1)">下一張</button>

  <script>
    const photos = ["http://1.bp.blogspot.com/-xdHGOG59LCI/UjawN7V-deI/AAAAAAAABb8/v3dHRriJkjo/s1600/EUCL%E4%B8%8A%E5%8F%B0%E9%A0%98%E7%8D%8E01.jpg", 
                    "http://4.bp.blogspot.com/-UKB9Pburh8I/Ujawb7t3wGI/AAAAAAAABcE/2h3OMM1sb-0/s1600/Frocius+Android%E4%B8%8A%E5%8F%B0%E9%A0%98%E7%8D%8E01.jpg", 
                    "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjUJYAY6cEyvTthq9s3Pz3RCayzcOM7UVffF8cmCk0XZBaAz7O6tLktSa7e1_f7Ni_ZxZaD8p4tLzqzhqnHo8rnsKuYvhPflJr2mAZeOSayg3sHjXCrrOtJ7cqPP6OdZAEJsHYJ5QWPTXw/s640/R0010396.JPG"];
    let index = 0;
    const container = document.getElementById("photoContainer");
    const statusEl = document.getElementById("status");

    function updateView() {
      container.innerHTML = '<img src="' + photos[index] + '" width="300">';
      statusEl.textContent = (index + 1) + " / " + photos.length;
    }

    function changePhoto(step) {
      index = (index + step + photos.length) % photos.length;  //使用餘數取代條件判斷，使得最終index的結果永遠會在0~2之間
      updateView();
      //第一張按上一張變成第三張：index=(0+-1+3)%3=2，photos[2]=第三張
      //第三張按下一張變成第四張：index=(2+1+3)%3=0，photos[0]=第一張
    }

    updateView();
  </script>

  
</body>
</html>
